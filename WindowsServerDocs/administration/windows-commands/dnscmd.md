---
title: dnscmd
description: 适用于 dnscmd 的 Windows 命令主题，它是用于管理 DNS 服务器的命令行接口。
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: e7f31cb5-a426-4e25-b714-88712b8defd5
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 732b7550236295d1651977a6e1c364bc066fa460
ms.sourcegitcommit: b00d7c8968c4adc8f699dbee694afe6ed36bc9de
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/08/2020
ms.locfileid: "80845340"
---
# <a name="dnscmd"></a>Dnscmd

>适用于：Windows Server（半年频道）、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

用于管理 DNS 服务器的命令行界面。 此实用程序在编写批处理文件脚本时非常有用，有助于自动执行日常 DNS 管理任务，或在网络中执行简单的无人参与安装和配置新的 DNS 服务器。  

## <a name="syntax"></a>语法  
```  
dnscmd <ServerName> <command> [<command parameters>]  
```  

### <a name="parameters"></a>参数  

|  参数   |     说明      |
|--------------|--------------------------------------------------------------|
| `<ServerName>` | 远程或本地 DNS 服务器的 IP 地址或主机名。 |


## <a name="commands"></a>命令  

|   命令   |     说明      |
| ----------- | -------------------- |
| [dnscmd/ageallrecords](#BKMK_1) | 设置区域或节点中所有时间戳的当前时间。 |
| [dnscmd/clearcache](#BKMK_2)  | 清除 DNS 服务器缓存。 |
| [dnscmd/config](#BKMK_3) | 重置 DNS 服务器或区域配置。 |
| [dnscmd/createbuiltindirectorypartitions](#BKMK_4) | 创建内置 DNS 应用程序目录分区。 |
| [dnscmd/createdirectorypartition](#BKMK_5) | 创建 DNS 应用程序目录分区。 |
| [dnscmd/deletedirectorypartition](#BKMK_6) | 删除 DNS 应用程序目录分区。 |
| [dnscmd/directorypartitioninfo](#BKMK_7) | 列出有关 DNS 应用程序目录分区的信息。 |
| [dnscmd/enlistdirectorypartition](#BKMK_8) | 将 DNS 服务器添加到 DNS 应用程序目录分区的复制集。 |
| [dnscmd/enumdirectorypartitions](#BKMK_9) | 列出服务器的 DNS 应用程序目录分区。 |
| [dnscmd/enumrecords](#BKMK_10) | 列出区域中的资源记录。 |
| [dnscmd/enumzones](#BKMK_11) | 列出由指定服务器承载的区域。 |
| [dnscmd/exportsettings](#BKMK_25a) | 将服务器配置信息写入文本文件。 |
| [dnscmd/info](#BKMK_12) | 获取服务器信息。 |
| [dnscmd/ipvalidate](#BKMK_29a) | 验证远程 DNS 服务器。 |
| [dnscmd/nodedelete](#BKMK_13)  | 删除区域中某个节点的所有记录。 |
| [dnscmd/recordadd](#BKMK_14)  | 将资源记录添加到区域。 |
| [dnscmd/recorddelete](#BKMK_15) | 从区域中删除资源记录。 |
| [dnscmd/resetforwarders](#BKMK_16) | 将 DNS 服务器设置为转发递归查询。 |
| [dnscmd/resetlistenaddresses](#BKMK_17) | 设置服务器 IP 地址以提供 DNS 请求。 |
| [dnscmd/startscavenging](#BKMK_18) | 启动服务器清理。 |
| [dnscmd/statistics](#BKMK_19) | 查询或清除服务器统计信息数据。 |
| [dnscmd/unenlistdirectorypartition](#BKMK_20) | 从 DNS 应用程序目录分区的复制集中删除 DNS 服务器。 |
| [dnscmd/writebackfiles](#BKMK_21) | 将所有区域或根提示数据保存到文件中。 |
| [dnscmd/zoneadd](#BKMK_22) | 在 DNS 服务器上创建新区域。 |
| [dnscmd/zonechangedirectorypartition](#BKMK_23) | 更改区域所在的目录分区。 |
| [dnscmd/zonedelete](#BKMK_24) | 从 DNS 服务器中删除区域。 |
| [dnscmd/zoneexport](#BKMK_25) | 将区域的资源记录写入文本文件。 |
| [dnscmd/zoneinfo](#BKMK_26) | 显示区域信息。 |
| [dnscmd/zonepause](#BKMK_27) | 暂停区域。 |
| [dnscmd/zoneprint](#BKMK_28) | 显示区域中的所有记录。 |
| [dnscmd/zonerefresh](#BKMK_30) | 强制从主区域刷新辅助区域。 |
| [dnscmd/zonereload](#BKMK_31) | 从其数据库重新加载区域。 |
| [dnscmd/zoneresetmasters](#BKMK_32) | 将提供区域传输信息的主服务器更改为辅助区域。 |
| [dnscmd/zoneresetscavengeservers](#BKMK_33) | 更改可清理区域的服务器。 |
| [dnscmd/zoneresetsecondaries](#BKMK_34) | 重置区域的辅助信息。 |
| [dnscmd/zoneresettype](#BKMK_29) | 更改区域类型。 |
| [dnscmd/zoneresume](#BKMK_35) | 恢复区域。 |
| [dnscmd/zoneupdatefromds](#BKMK_36) | 使用 active directory 域服务（AD DS）中的数据更新 active directory 集成的区域。 |
| [dnscmd/zonewriteback](#BKMK_37) | 将区域数据保存到文件。 |

### <a name="dnscmd-ageallrecords"></a><a name=BKMK_1></a>dnscmd/ageallrecords
  
为 DNS 服务器上指定区域或节点上的资源记录设置时间戳的当前时间。 
 
#### <a name="syntax"></a>语法

```  
dnscmd [<ServerName>] /ageallrecords <ZoneName>[<NodeName>] | [/tree]|[/f]  
```  

##### <a name="parameters"></a>参数

| Partameter | 说明 |
| ---------- | ----------- |
| `<ServerName>` | 指定管理员计划管理的 DNS 服务器，由 IP 地址、完全限定的域名（FQDN）或主机名表示。 如果省略此参数，则使用本地服务器。 |
| `<ZoneName>` | 指定区域的 FQDN。 |
| `<NodeName>` | 指定区域中的特定节点或子树。 **NodeName**使用以下内容指定区域中的节点或子树：<p>-@ 表示根区域或 FQDN<p>-节点的 FQDN （末尾带有句点（.）的名称）<p>-相对于区域根的名称的单个标签。 |
| `/tree` | 指定所有子节点也接收时间戳。 |
| `/f` | 运行命令而不要求确认。 |

#### <a name="remarks"></a>备注

- **Ageallrecords**命令用于实现 dns 的当前版本和以前版本的 dns 之间的向后兼容性，在这种情况下，不支持老化和清理。 它将包含当前时间的时间戳添加到没有时间戳的资源记录，并将当前时间设置为具有时间戳的资源记录。

- 除非记录有时间戳，否则不会进行记录清理。 名称服务器（NS）资源记录、颁发机构起始（SOA）资源记录和 Windows Internet 名称服务（WINS）资源记录不包含在清理过程中，即使在**ageallrecords**命令运行时，它们也不会进行时间戳。

- 除非为 DNS 服务器和区域启用了清理，否则此命令将失败。 有关如何为区域启用清理的信息，请参阅<a href=#BKMK_3 data-raw-source=[config](#BKMK_3)>config</a>命令中区域级语法下的**老化**参数。<br/>-将时间戳添加到 DNS 资源记录，使其与 Windows 2000、Windows XP 或 Windows Server 2003 以外的操作系统上运行的 DNS 服务器不兼容。 使用**ageallrecords**命令添加的时间戳不能撤消。<br/>-如果未指定任何可选参数，则该命令将返回指定节点上的所有资源记录。 如果至少为一个可选参数指定了值，则**dnscmd**仅枚举与可选参数或参数中指定的一个或多个值相对应的资源记录。<br/># # # # 示例<br/>请参阅 < href =https://technet.microsoft.com/library/cc784399(v=ws.10).aspx 数据原始-源 =[示例1：将时间戳的当前时间设置为资源记录](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)> 示例1：将时间戳的当前时间设置为</a> 的资源记录。<br/>### <a name=BKMK_2> </a>dnscmd/clearcache<br/>清除指定的 DNS 服务器上的资源记录的 DNS 缓存内存。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /clearcache</code><br/># # # # # 参数<br/><ServerName><br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/># # # # 示例用法<br/><code>dnscmd dnssvr1.contoso.com /clearcache</code><br/>### <a name=BKMK_3> </a>dnscmd/config<br/>更改 DNS 服务器和单个区域的注册表中的值。 接受服务器级别设置和区域级别设置。<br/>&gt; [!CAUTION]<br/>&gt; 不要直接编辑注册表，除非没有其他方法。 注册表编辑器会绕过标准安全措施，同时允许可能降低性能的设置、损坏系统，甚至要求你重新安装 Windows。 可以通过使用 "控制面板" 或 "Microsoft 管理控制台（mmc）" 中的 "程序" 来安全地更改大多数注册表设置。 如果必须直接编辑注册表，请首先对其进行备份。 有关详细信息，请参阅注册表编辑器帮助。<br/># # # # 服务器级语法<br/><code>dnscmd [&lt;ServerName&gt;] /config &lt;Parameter&gt;</code><br/># # # # dnscmd/config<br/>修改指定服务器的配置。<br/># # # # # 参数<br/><ServerName><br/>指定您计划管理的 DNS 服务器，由本地计算机语法、IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/><Parameter><br/>指定一个设置和一个值作为选项。 参数值使用以下语法：*参数*[*值*]<br/>本部分的其余部分介绍了以下参数值：<br/>-    **/addressanswerlimit**<br/>-    **/bindsecondaries**<br/>-    **/bootmethod**<br/>-    **/defaultagingstate**<br/>-    **/defaultnorefreshinterval**<br/>-    **/defaultrefreshinterval**<br/>-    **/disableautoreversezones**<br/>-    **/disablensrecordsautocreation**<br/>-    **/dspollinginterval**<br/>-    **/dstombstoneinterval**<br/>-    **/ednscachetimeout**<br/>-    **/enablednsprobes**<br/>-    **/enablednssec**<br/>-    **/enableglobalnamessupport**<br/>-    **/enableglobalqueryblocklist**<br/>-    **/eventloglevel**<br/>-    **/forwarddelegations**<br/>-    **/forwardingtimeout**<br/>-    **/globalnamesqueryorder**<br/>-    **/globalqueryblocklist**<br/>-    **/isslave**<br/>-    **/localnetpriority**<br/>-    **/logfilemaxsize**<br/>-    **/logfilepath**<br/>-    **/logipfilterlist**<br/>-    **/loglevel**<br/>-    **/maxcachesize**<br/>-    **/maxcachettl**<br/>-    **/namecheckflag**<br/>-    **/notcp**<br/>-    **/norecursion**<br/>-    **/recursionretry**<br/>-    **/recursiontimeout**<br/>-    **/roundrobin**<br/>-    **/rpcprotocol**<br/>-    **/scavenginginterval**<br/>-    **/secureresponses**<br/>-    **/sendport**<br/>-    **/strictfileparsing**<br/>-    **/updateoptions**<br/>-    **/writeauthorityns**<br/>-    **/xfrconnecttimeout**<br/>**/addressanswerlimit [0 | 5-28]**<br/>指定 DNS 服务器为响应查询而可以发送的主机记录的最大数目。 该值可以为零（0），也可以在5到28条记录范围内。 默认值为零（0）。<br/>**/bindsecondaries [0 | 1]**<br/>更改区域传送的格式，使其能够实现最大的压缩和效率。 但是，此格式与早期版本的 Berkeley Internet 名称域（BIND）不兼容。<br/>**0**<br/>使用最大压缩。 此格式仅兼容4.9.4 和更高版本的 BIND。<br/>**1**<br/>每条消息只发送到非 Microsoft DNS 服务器的一个资源记录。 此格式与4.9.4 之前的绑定版本兼容。 此为默认设置。<br/>**/bootmethod [0 | 1 | 2 | 3]**<br/>确定 DNS 服务器从中获取其配置信息的源。<br/>**0**<br/>清除配置信息的源。<br/>**1**<br/>从位于 DNS 目录的绑定文件（默认情况下为%systemroot%\System32\DNS）加载。<br/>**2**<br/>从注册表加载。<br/>**3**<br/>从 AD DS 和注册表加载。 此为默认设置。<br/>**/defaultagingstate [0 | 1]**<br/>确定默认情况下是否对新创建的区域启用 DNS 清理功能。<br/>**0**<br/>禁用清理。 此为默认设置。<br/>**1**<br/>启用清理。<br/>**/defaultnorefreshinterval [0x1-0xFFFFFFFF | 0xA8]**<br/>设置动态更新记录不接受刷新的时间段。 服务器上的区域会自动继承此值。 若要更改默认值，请键入**0x1-0xffffffff**范围内的值。 服务器的默认值为**0xA8**。<br/>**/defaultrefreshinterval [0x1-0xFFFFFFFF | 0xA8]**<br/>设置允许动态更新 DNS 记录的时间段。 服务器上的区域会自动继承此值。 若要更改默认值，请键入**0x1-0xffffffff**范围内的值。 服务器的默认值为**0xA8**。<br/>**/disableautoreversezones [0 | 1]**<br/>启用或禁用反向查找区域的自动创建。 反向查找区域提供对 DNS 域名的 Internet 协议（IP）地址的解析。<br/>**0**<br/>允许自动创建反向查找区域。 此为默认设置。<br/>**1**<br/>禁止自动创建反向查找区域。<br/>**/disablensrecordsautocreation {0 | 1}**<br/>指定 DNS 服务器是否自动创建它所承载的区域的名称服务器（NS）资源记录。<br/>**0**<br/>自动为 DNS 服务器托管的区域创建名称服务器（NS）资源记录。<br/>**1**<br/>不会自动为 DNS 服务器托管的区域创建名称服务器（NS）资源记录。<br/>**/dspollinginterval 0-30**<br/>指定 DNS 服务器轮询 AD DS active directory 集成区域中的更改的频率。<br/>**/dstombstoneinterval [1-30]**<br/>AD DS 中保留已删除记录的时间长度（以秒为单位）。<br/>**/ednscachetimeout [<seconds>]**<br/>指定扩展 DNS （EDNS）信息的缓存秒数。 最小值为3600，最大值为15724800。 默认值为604800秒（一周）。<br/>**/enableednsprobes {0 | 1}**<br/>启用或禁用服务器以探测其他服务器，以确定它们是否支持 EDNS。<br/>**0**<br/>禁用对 EDNS 探测的活动支持。<br/>**1**<br/>启用对 EDNS 探测的活动支持。<br/>**/enablednssec {0 | 1}**<br/>启用或禁用对 DNS 安全扩展（DNSSEC）的支持。<br/>**0**<br/>禁用 DNSSEC。<br/>**1**<br/>启用 DNSSEC。<br/>**/enableglobalnamessupport {0 | 1}**<br/>启用或禁用对 GlobalNames 区域的支持。 GlobalNames 区域支持跨林解析单标签 DNS 名称。<br/>**0**<br/>禁用对 GlobalNames 区域的支持。 将此命令的值设置为**0**时，DNS 服务器服务不解析 GlobalNames 区域中的单标签名称。<br/>**1**<br/>启用对 GlobalNames 区域的支持。 将此命令的值设置为**1**时，DNS 服务器服务将解析 GlobalNames 区域中的单标签名称。<br/>**/enableglobalqueryblocklist {0 | 1}**<br/>启用或禁用对列表中名称解析的全局查询阻止列表的支持。 默认情况下，当服务首次启动时，DNS 服务器服务将创建并启用全局查询阻止列表。 若要查看当前的全局查询块列表，请使用**dnscmd/info/globalqueryblocklist**命令。<br/>**0**<br/>禁用对全局查询块列表的支持。 将此命令的值设置为**0**时，DNS 服务器服务将对阻止列表中的名称的查询做出响应。<br/>**1**<br/>为全局查询块列表启用支持。 将此命令的值设置为**1**时，DNS 服务器服务不会响应对阻止列表中的名称的查询。<br/>**/eventloglevel [0 | 1 | 2 | 4]**<br/>确定事件查看器的 DNS 服务器日志中记录的事件。<br/>**0**<br/>不记录任何事件。<br/>**1**<br/>仅记录错误。<br/>**2**<br/>仅记录错误和警告。<br/>**4**<br/>记录错误、警告和信息性事件。 此为默认设置。<br/>**/forwarddelegations [0 | 1]**<br/>确定 DNS 服务器如何处理委托的子的查询。 这些查询可以发送到查询中引用的子，也可以发送到为 DNS 服务器命名的转发器列表。 设置中的条目仅在启用转发时使用。<br/>**0**<br/>自动将引用委托的子区域的查询发送到相应的子。 此为默认设置。<br/>**1**<br/>将引用委托的子的查询转发到现有转发器。<br/>**/forwardingtimeout [<seconds>]**<br/>确定 DNS 服务器等待转发器响应的秒数（0x1-0xFFFFFFFF），然后再尝试另一个转发器。 默认值为**0x5**，即5秒。<br/>**/globalneamesqueryorder** {**0 | 1**}<br/>指定在解析名称时，DNS 服务器服务是否首先在 GlobalNames 区域或本地区域中查找。<br/>**0**<br/>DNS 服务器服务将尝试通过先查询 GlobalNames 区域来解析名称，然后再查询其具有权威的区域。<br/>**1**<br/>DNS 服务器服务将尝试通过先查询其权威的区域来解析名称，然后再查询 GlobalNames 区域。<br/>**/globalqueryblocklist [[<name> [<name>] ...]**<br/>用指定名称的列表替换当前的全局查询块列表。 如果未指定任何名称，则此命令将清除阻止列表。 默认情况下，全局查询块列表包含以下项：<br/>-isatap<br/>-wpad<br/>当首次启动时，DNS 服务器服务可以删除其中一个或两个这两个名称，前提是在现有区域中查找这些名称。<br/>**/isslave [0 | 1]**<br/>确定当 DNS 服务器转发的查询未收到响应时，DNS 服务器的响应方式。<br/>**0**<br/>指定 DNS 服务器不是从属服务器（也称为*从属*服务器）。 如果转发器没有响应，则 DNS 服务器将尝试解析查询本身。 此为默认设置。<br/>**1**<br/>指定 DNS 服务器是从属服务器。 如果转发器没有响应，则 DNS 服务器将终止搜索，并向解析程序发送失败消息。<br/>**/localnetpriority [0 | 1]**<br/>确定当 DNS 服务器具有相同名称的多个主机记录时返回主机记录的顺序。<br/>**0**<br/>按 DNS 数据库中列出的顺序返回记录。<br/>**1**<br/>返回前面具有相似 IP 网络地址的记录。 此为默认设置。<br/>**/logfilemaxsize [<size>]**<br/>指定 Dns 日志文件的最大字节大小（0x10000）。 当文件达到其最大大小时，DNS 会覆盖最旧的事件。 默认大小为0x400000 处，即4兆字节（MB）。<br/>**/logfilepath [&lt;path + LogFileName&gt;]**<br/>指定 Dns 日志文件的路径。 默认路径为%systemroot%\System32\Dns\Dns.log。 可以通过使用格式*path + LogFileName*指定不同的路径。<br/>**/logipfilterlist <IPaddress> [，<IPaddress>...]**<br/>指定在调试日志文件中记录哪些数据包。 条目是 IP 地址的列表。 仅记录传入和传出列表中 IP 地址的数据包。<br/>**/loglevel [<Eventtype>]**<br/>确定在 Dns .log 文件中记录的事件类型。 每个事件类型都用十六进制数表示。 如果希望日志中有多个事件，请使用十六进制加法添加值，然后输入 sum。<br/>**0x0**<br/>DNS 服务器不会创建日志。 这是默认条目。<br/>**0x10**<br/>记录查询。<br/>**0x10**<br/>日志通知。<br/>**0x20**<br/>记录更新。<br/>**0xFE**<br/>记录 nonquery 事务。<br/>**0x100**<br/>记录问题事务。<br/>**0x200**<br/>记录答案。<br/>**0x1000**<br/>日志发送数据包。<br/>**0x2000**<br/>日志接收数据包。<br/>**0x4000**<br/>记录用户数据报协议（UDP）数据包。<br/>**0x8000**<br/>记录传输控制协议（TCP）数据包。<br/>**0xFFFF**<br/>记录所有数据包。<br/>**0x10000**<br/>记录 active directory 写入事务。<br/>**0x20000**<br/>记录 active directory 更新事务。<br/>**0x1000000**<br/>记录完整的数据包。<br/>**0x80000000**<br/>记录写入事务。<br/>**/maxcachesize**<br/>指定 DNS 服务器的内存缓存的最大大小（KB）。<br/>**/maxcachettl [<seconds>]**<br/>确定在缓存中保存记录的秒数（0x0-0xFFFFFFFF）。 如果使用了**0x0**设置，则 DNS 服务器不会缓存记录。 默认设置为**0x15180** （86400秒或1天）。<br/>**/maxnegativecachettl [<seconds>]**<br/>指定记录对查询的否定应答的条目在 DNS 缓存中的保留时间（0x1-0xFFFFFFFF）。 默认设置为**0x384** （900秒）。<br/>**/namecheckflag [0 | 1 | 2 | 3]**<br/>指定检查 DNS 名称时使用的字符标准。<br/>**0**<br/>使用符合 Internet 工程任务组（IETF）征求意见文档（Rfc）的 ANSI 字符。<br/>**1**<br/>使用不一定符合 IETF Rfc 的 ANSI 字符。<br/>**2**<br/>使用多字节 UCS 转换格式8（UTF-8）字符。 此为默认设置。<br/>**3**<br/>使用所有字符。<br/>**/norecursion [0 | 1]**<br/>确定 DNS 服务器是否执行递归名称解析。<br/>**0**<br/>如果在查询中请求了递归名称解析，则 DNS 服务器将执行递归式名称解析。 此为默认设置。<br/>**1**<br/>DNS 服务器不执行递归名称解析。<br/>**/notcp**<br/>此参数已过时，并且它在当前版本的 Windows Server 中不起作用。<br/>**/recursionretry [<seconds>]**<br/>确定 DNS 服务器在再次尝试联系远程服务器之前等待的秒数（0x1-0xFFFFFFFF）。 默认设置为0x3 （3秒）。 如果递归发生在慢速广域网（WAN）链接上，则应增加此值。<br/>**/recursiontimeout [<seconds>]**<br/>确定 DNS 服务器在停止尝试联系远程服务器之前等待的秒数（0x1-0xFFFFFFFF）。 设置范围为**0x1**到**0xffffffff**。 默认设置为**0xF** （15秒）。 如果递归发生在慢速 WAN 链接上，则应增加此值。<br/>**/roundrobin [0 | 1]**<br/>确定当服务器具有同一名称的多个主机记录时返回主机记录的顺序。<br/>0<br/>DNS 服务器不使用轮循机制。 而是返回每个查询的第一条记录。<br/>**1**<br/>DNS 服务器在其从顶部到匹配记录列表底部的记录之间进行旋转。 此为默认设置。<br/>**/rpcprotocol [0x0 | 0x1 | 0x2 | 0x4 | 0xFFFFFFFF]**<br/>指定远程过程调用（RPC）在建立来自 DNS 服务器的连接时使用的协议。<br/>**0x0**<br/>为 DNS 禁用 RPC。<br/>**0x1**<br/>使用 TCP/IP。<br/>**0x2**<br/>使用命名管道。<br/>**0x4**<br/>使用本地过程调用（LPC）。<br/>**0xFFFFFFFF**<br/>所有协议。 此为默认设置。<br/>**/scavenginginterval [<hours>]**<br/>确定是否已启用 DNS 服务器的清理功能，并设置清理周期间的小时数（0x0-0xFFFFFFFF）。 默认设置为**0x0**，这将禁用 DNS 服务器的清理。 设置大于**0x0**会启用对服务器的清理，并设置清理周期之间的小时数。<br/>**/secureresponses [0 | 1]**<br/>确定 DNS 是否筛选保存在缓存中的记录。<br/>**0**<br/>将对名称查询的所有响应保存到缓存中。 此为默认设置。<br/>**1**<br/>仅将属于同一 DNS 子树的记录保存到缓存中。<br/>**/sendport [<port>]**<br/>指定 DNS 用于将递归查询发送到其他 DNS 服务器的端口号（0x0-0xFFFFFFFF）。 默认设置为**0x0**，这意味着端口号是随机选择的。<br/>**/serverlevelplugindll [<Dllpath>]**<br/>指定自定义插件的路径。 当*Dllpath*指定有效 DNS 服务器插件的完全限定路径名称时，DNS 服务器将在插件中调用函数，以解析超出所有本地托管区域的名称查询。 如果查询的名称超出了插件的作用域，则 DNS 服务器会根据配置使用转发或递归执行名称解析。 如果未指定*Dllpath* ，则在以前配置自定义插件时，DNS 服务器将停止使用自定义插件。<br/>**/strictfileparsing [0 | 1]**<br/>确定加载区域时&#39;遇到错误记录时 DNS 服务器的行为。<br/>**0**<br/>即使服务器遇到错误记录，DNS 服务器仍将继续加载该区域。 错误记录在 DNS 日志中。 此为默认设置。<br/>**1**<br/>DNS 服务器停止加载区域，并在 DNS 日志中记录该错误。<br/>**/updateoptions <RecordValue>**<br/>禁止动态更新指定类型的记录。 如果要在日志中禁止多个记录类型，请使用十六进制加法添加值，然后输入和。<br/>**0x0**<br/>不限制任何记录类型。<br/>**0x1**<br/>排除授权机构（SOA）资源记录。<br/>**0x2**<br/>不包括名称服务器（NS）资源记录。<br/>**0x4**<br/>不包括名称服务器（NS）资源记录的委托。<br/>**0x8**<br/>排除服务器主机记录。<br/>**0x100**<br/>在安全动态更新期间，不包括开始颁发机构（SOA）资源记录。<br/>**0x200**<br/>在安全动态更新期间，不包括根名称服务器（NS）资源记录。<br/>**0x30F**<br/>在标准动态更新期间，不包括名称服务器（NS）资源记录、颁发机构起始（SOA）资源记录和服务器主机记录。 在安全动态更新期间，不包括根名称服务器（NS）资源记录和颁发机构起始（SOA）资源记录。 允许委托和服务器主机更新。<br/>**0x400**<br/>在安全动态更新期间，不包括委派名称服务器（NS）资源记录。<br/>**0x800**<br/>在安全动态更新期间，不包括服务器主机记录。<br/>**0x1000000**<br/>排除委托签名者（DS）记录。<br/>**0x80000000**<br/>禁用 DNS 动态更新。<br/>**/writeauthorityns [0 | 1]**<br/>确定 DNS 服务器何时在响应的授权部分写入名称服务器（NS）资源记录。<br/>**0**<br/>仅在引用的 "授权" 部分写入名称服务器（NS）资源记录。 此设置符合 Rfc 1034、域名概念和设施以及 Rfc 2181，并向 DNS 规范进行说明。 此为默认设置。<br/>**1**<br/>在所有成功的权威响应的 "授权" 部分写入名称服务器（NS）资源记录。<br/>**/xfrconnecttimeout [<seconds>]**<br/>确定主 DNS 服务器等待其辅助服务器的传输响应的秒数（0x0-0xFFFFFFFF）。 默认值为**0x1E** （30秒）。 超时值过期后，连接将终止。<br/># # # # 区域级语法<br/><code>dnscmd /config &lt;Parameters&gt;</code><br/># # # # dnscmd/config<br/>修改指定区域的配置。<br/># # # # # 参数<br/>**<Parameters>**<br/>指定一个设置、一个区域名称和一个值作为选项。 参数值使用以下语法：*ZoneName 参数*[*值*]<br/>本部分的其余部分介绍了以下参数值：<br/>-    **/aging**<br/>-    **/allownsrecordsautocreation**<br/>-    **/allowupdate**<br/>-    **/forwarderslave**<br/>-    **/forwardertimeout**<br/>-    **/norefreshinterval**<br/>-    **/refreshinterval**<br/>-    **/securesecondaries**<br/>**/aging <ZoneName>**<br/>启用或禁用特定区域中的清理。<br/>**/allownsrecordsautocreation <ZoneName> [<Value>]**<br/>替代 DNS 服务器&#39;的名称服务器（NS）资源记录启用设置。 之前为此区域注册的名称服务器（NS）资源记录不会受到影响。 因此，你必须手动将其删除（如果不希望这样做）。<br/>**/allowupdate <ZoneName>**<br/>确定指定区域是否接受动态更新。<br/>**/forwarderslave <ZoneName>**<br/>替代 DNS 服务器 **/isslave**设置。<br/>**/forwardertimeout <ZoneName>**<br/>确定在尝试另一个转发器之前 DNS 区域等待转发器响应的秒数。 此值将覆盖在服务器级别设置的值。<br/>**/norefreshinterval <ZoneName>**<br/>设置区域的时间间隔，在此时间间隔内，无刷新可以动态更新指定区域中的 DNS 记录。<br/>**/refreshinterval <ZoneName>**<br/>设置区域的时间间隔，在此时间间隔内刷新可以动态更新指定区域中的 DNS 记录。<br/>**/securesecondaries <ZoneName>**<br/>确定哪些辅助服务器可以从该区域的主服务器接收区域更新。<br/># # # # 备注<br/>-必须仅为区域级别参数指定区域名称。<br/>### <a name=BKMK_4> </a>dnscmd/createbuiltindirectorypartitions<br/>创建 DNS 应用程序目录分区。 安装 DNS 时，将在林和域级别创建该服务的应用程序目录分区。 使用此命令创建已删除或从未创建的 DNS 应用程序目录分区。 如果没有参数，此命令将为域创建内置 DNS 目录分区。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /createbuiltindirectorypartitions [/forest] [/alldomains]</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**/forest**<br/>为林创建 DNS 目录分区。<br/>**/alldomains**<br/>为林中的所有域创建 DNS 分区。<br/>### <a name=BKMK_5> </a>dnscmd/createdirectorypartition<br/>创建 DNS 应用程序目录分区。 安装 DNS 时，将在林和域级别创建该服务的应用程序目录分区。 此操作创建其他 DNS 应用程序目录分区。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /createdirectorypartition &lt;PartitionFQDN&gt;</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<PartitionFQDN>**<br/>要创建的 DNS 应用程序目录分区的 FQDN。<br/>### <a name=BKMK_6> </a>dnscmd/deletedirectorypartition<br/>删除现有的 DNS 应用程序目录分区。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /deletedirectorypartition &lt;PartitionFQDN&gt;</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<PartitionFQDN>**<br/>将删除的 DNS 应用程序目录分区的 FQDN。<br/>### <a name=BKMK_7> </a>dnscmd/directorypartitioninfo<br/>列出有关指定的 DNS 应用程序目录分区的信息。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /directorypartitioninfo &lt;PartitionFQDN&gt; [/detail]</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<PartitionFQDN>**<br/>DNS 应用程序目录分区的 FQDN。<br/>**/detail**<br/>列出有关应用程序目录分区的所有信息。<br/>### <a name=BKMK_8> </a>dnscmd/enlistdirectorypartition<br/>将 DNS 服务器添加到指定的目录分区&#39;的副本集。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /enlistdirectorypartition &lt;PartitionFQDN&gt;</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<PartitionFQDN>**<br/>DNS 应用程序目录分区的 FQDN。<br/>### <a name=BKMK_9> </a>dnscmd/enumdirectorypartitions<br/>列出指定服务器的 DNS 应用程序目录分区。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /enumdirectorypartitions [/custom]</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**/custom**<br/>仅列出用户创建的目录分区。<br/>### <a name=BKMK_10> </a>dnscmd/enumrecords<br/>列出 DNS 区域中指定节点的资源记录。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /enumrecords &lt;ZoneName&gt; &lt;NodeName&gt; [/type &lt;RRtype&gt; &lt;Rrdata&gt;] [/authority] [/glue] [/additional] [/node | /child | /startchild&lt;ChildName&gt;] [/continue | /detail]</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定您计划管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**/enumrecords**<br/>列出指定区域中的资源记录。<br/>**<ZoneName>**<br/>指定资源记录所属的区域的名称。<br/>**<NodeName>**<br/>指定资源记录的节点名称。<br/>**/type <RRtype> <Rrdata>**<br/>指定要列出的资源记录的类型以及所需的数据类型：<br/>**<RRtype>**<br/>指定要列出的资源记录的类型。<br/>**<Rrdata>**<br/>指定所需的数据类型。<br/>**/authority**<br/>包括权威数据。<br/>**/glue**<br/>包括粘附数据。<br/>**/additional**<br/>包括有关列出的资源记录的所有其他信息。<br/>**{/node |/child |/startchild <ChildName>}**<br/>筛选或向资源记录显示添加信息：<br/>**/node**<br/>仅列出指定节点的资源记录。<br/>**/child**<br/>仅列出指定子域的资源记录。<br/>**/startchild <ChildName>**<br/>从指定的子域开始列表。<br/>**/continue |/detail**<br/>指定返回的数据的显示方式。<br/>**/continue**<br/>仅列出具有其类型和数据的资源记录。<br/>**/detail**<br/>列出有关资源记录的所有信息。<br/># # # # 示例用法<br/><code>dnscmd /enumrecords test.contoso.com test /additional</code><br/>### <a name=BKMK_11> </a>dnscmd/enumzones<br/>列出指定的 DNS 服务器上存在的区域。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /enumzones [/primary | /secondary | /forwarder | /stub | /cache | /auto-created] [/forward | /reverse | /ds | /file] [/domaindirectorypartition | /forestdirectorypartition | /customdirectorypartition | /legacydirectorypartition | /directorypartition &lt;PartitionFQDN&gt;]</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**/primary |/secondary |/forwarder |/stub |/cache |/auto-created**<br/>筛选要显示的区域类型：<br/>**/primary**<br/>列出属于标准主要区域或 active directory 集成区域的所有区域。<br/>**/secondary**<br/>列出所有标准辅助区域。<br/>**/forwarder**<br/>列出将未解析的查询转发到另一台 DNS 服务器的区域。<br/>**/stub**<br/>列出所有存根区域。<br/>**/cache**<br/>仅列出加载到缓存中的区域。<br/>**/auto-created**<br/>列出在 DNS 服务器安装过程中自动创建的区域。<br/>**/forward |反向 |/ds |/file**<br/>指定要显示的区域类型的附加筛选器：<br/>**/forward**<br/>列出正向查找区域。<br/>**反向**<br/>列出反向查找区域。<br/>**/ds**<br/>列出 active directory 集成区域。<br/>**/file**<br/>列出由文件支持的区域。<br/>**/domaindirectorypartition**<br/>列出域目录分区中存储的区域。<br/>**/forestdirectorypartition**<br/>列出林 DNS 应用程序目录分区中存储的区域。<br/>**/customdirectorypartition**<br/>列出用户定义的应用程序目录分区中存储的所有区域。<br/>**/legacydirectorypartition**<br/>列出域目录分区中存储的所有区域。<br/>**/directorypartition <PartitionFQDN>**<br/>列出指定目录分区中存储的所有区域。<br/># # # # 备注<br/>- **Enumzones**参数充当区域列表的筛选器。 如果未指定任何筛选器，则返回区域的完整列表。 指定筛选器后，只会在返回的区域列表中&#39;包含满足筛选条件的区域。<br/># # # # 示例<br/>请参阅 < href =https://technet.microsoft.com/library/cc784399(v=ws.10).aspx 数据原始源 =[示例2：显示 DNS 服务器上的区域的完整列表，](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)> 示例2：显示 DNS 服务器上的区域的完整列表</a> 或 < href =https://technet.microsoft.com/library/cc784399(v=ws.10).aspx 数据原始-源 =[示例3：显示](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)> 示例3的 DNS 服务器上的由区域列表：显示 DNS 服务器</a> 上的由区域列表。<br/>### <a name=BKMK_25a> </a>dnscmd/exportsettings<br/>创建一个文本文件，该文件列出 DNS 服务器的配置详细信息。 该文本文件的名称为 DnsSettings。 它位于服务器的%systemroot%\system32\dns 目录中。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /exportsettings</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由本地计算机语法、IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/># # # # 备注<br/>-可以使用**dnscmd/exportsettings**创建的文件中的信息来解决配置问题，或者确保配置了多个相同的服务器。<br/>### <a name=BKMK_12> </a>dnscmd/info<br/>显示指定服务器的注册表的 DNS 部分中的设置：**HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\DNS\Parameters**<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /info [&lt;Setting&gt;]</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<Setting>**<br/>**信息**命令返回的任何设置都可以单独指定。 如果未指定设置，则返回常见设置的报表。<br/># # # # 备注<br/>-此命令显示 DNS 服务器级别的注册表设置。 若要显示区域级别的注册表设置，请使用<a href=#BKMK_26 data-raw-source=[zoneinfo](#BKMK_26)>zoneinfo</a>命令。 若要查看可使用此命令显示的设置的列表，请参阅<a href=#BKMK_3 data-raw-source=[config](#BKMK_3)>配置</a>说明。<br/># # # # 示例<br/>请参阅 < href =https://technet.microsoft.com/library/cc784399(v=ws.10).aspx 数据原始源 =[示例4：显示 DNS 服务器的 IsSlave 设置，](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)> 示例4：显示 DNS 服务器中的 IsSlave 设置</a> 或 < href =https://technet.microsoft.com/library/cc784399(v=ws.10).aspx 数据原始源 =[示例5：显示](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)> 示例5的 DNS 服务器的 Recursiontimeout 设置：</a> 中显示 DNS 服务器的 Recursiontimeout 设置。<br/>### <a name=BKMK_29a> </a>dnscmd/ipvalidate<br/>测试 IP 地址是标识正常运行的 DNS 服务器，还是 DNS 服务器可以充当转发器、根提示服务器或特定区域的主服务器。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /ipvalidate &lt;Context&gt; [&lt;ZoneName&gt;] [[&lt;IPaddress&gt;]]</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由本地计算机语法、IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<Context>**<br/>指定要执行的测试类型。 可以指定以下任意测试：<br/>-    **/dnsservers**测试具有指定地址的计算机是否运行 DNS 服务器。<br/>-    **/forwarders**测试指定的地址是否可识别可充当转发器的 DNS 服务器。<br/>-    **/roothints**测试指定的地址是否可识别可充当根提示名称服务器的 DNS 服务器。<br/>-    **/zonemasters**测试指定的地址是否标识作为*ZoneName*的主服务器的 DNS 服务器。<br/>**<ZoneName>**<br/>标识区域。 将此参数与 **/zonemasters**参数一起使用。<br/>**<IPaddress>**<br/>指定命令测试的 IP 地址。<br/># # # # 示例用法<br/><pre>dnscmd dnssvr1.contoso.com /ipvalidate /dnsservers 10.0.0.1 10.0.0.2  
dnscmd dnssvr1.contoso.com /ipvalidate /zonemasters corp.contoso.com 10.0.0.2</pre><br/>### <a name=BKMK_13> </a>dnscmd/nodedelete<br/>删除指定主机的所有记录。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /nodedelete &lt;ZoneName&gt; &lt;NodeName&gt; [/tree] [/f]</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<ZoneName>**<br/>指定区域的名称。<br/>**<NodeName>**<br/>指定要删除的节点的主机名。<br/>**/tree**<br/>删除所有子记录。<br/>**/f**<br/>执行命令而不要求确认。<br/># # # # 示例<br/>请参阅 < href =https://technet.microsoft.com/library/cc784399(v=ws.10).aspx 数据原始源 =[示例6：从节点中删除记录](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)> 示例6：从节点</a> 删除记录。<br/>### <a name=BKMK_14> </a>dnscmd/recordadd<br/>将记录添加到 DNS 服务器中的指定区域。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /recordadd &lt;ZoneName&gt; &lt;NodeName&gt; &lt;RRtype&gt; &lt;Rrdata&gt;</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由本地计算机语法、IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<ZoneName>**<br/>指定记录所在的区域。<br/>**<NodeName>**<br/>指定区域中的特定节点。<br/>**<RRtype>**<br/>指定要添加的记录的类型。<br/>**<Rrdata>**<br/>指定预期的数据类型。<br/>&gt; [!NOTE]<br/>&gt; 在添加记录时，请确保使用正确的数据类型和数据格式。 有关资源记录类型和相应数据类型的列表，请参阅 < a href =https://technet.microsoft.com/library/cc758321(v=ws.10).aspx 数据原始-源 =[资源记录引用](https://technet.microsoft.com/library/cc758321(v=ws.10).aspx)> 资源记录引用</a> 。<br/># # # # 示例用法<br/><pre>dnscmd dnssvr1.contoso.com /recordadd test A 10.0.0.5  
dnscmd /recordadd test.contoso.com test MX 10 mailserver.test.contoso.com</pre><br/>### <a name=BKMK_15> </a>dnscmd/recorddelete<br/>删除指定区域中的资源记录。<br/># # # # 语法<br/><code>dnscmd &lt;ServerName&gt; /recorddelete &lt;ZoneName&gt; &lt;NodeName&gt; &lt;RRtype&gt; &lt;Rrdata&gt;[/f]</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<ZoneName>**<br/>指定资源记录所在的区域。<br/>**<NodeName>**<br/>指定主机的名称。<br/>**<RRtype>**<br/>指定要删除的资源记录的类型。<br/>**<Rrdata>**<br/>指定预期的数据类型。<br/>**/f**<br/>执行命令而不要求确认：<br/>-由于节点可以有多个资源记录，因此此命令要求您非常具体地了解要删除的资源记录类型。<br/>-如果指定了数据类型，但未指定资源记录数据的类型，则会删除具有指定节点的特定数据类型的所有记录。<br/># # # # 示例用法<br/><code>dnscmd /recorddelete test.contoso.com test MX 10 mailserver.test.contoso.com</code><br/>### <a name=BKMK_16> </a>dnscmd/resetforwarders<br/>选择或重置 DNS 服务器在本地无法解析 DNS 查询时将其转发到的 IP 地址。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /resetforwarders [&lt;IPaddress&gt; [,&lt;IPaddress&gt;]...][/timeout &lt;timeOut&gt;] [/slave|/noslave]</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<IPaddress>**<br/>列出 DNS 服务器将未解析的查询转发到的 IP 地址。<br/>**/timeout <timeOut>**<br/>设置 DNS 服务器等待转发器响应的秒数。 默认情况下，此值为5秒。<br/>**/slave |/noslave**<br/>确定当转发器未能解析查询时，DNS 服务器是否执行其自己的迭代查询：<br/>**/slave**<br/>如果转发器未能解析查询，则阻止 DNS 服务器执行其自身的迭代查询。<br/>**/noslave**<br/>如果转发器未能解析查询，则允许 DNS 服务器执行其自身的迭代查询。 此为默认设置。<br/># # # # 备注<br/>-默认情况下，DNS 服务器在无法解析查询时执行迭代查询。<br/>-通过使用**resetforwarders**命令设置 IP 地址会使 dns 服务器对指定 IP 地址的 dns 服务器执行递归查询。 如果转发器未解析查询，则 DNS 服务器可以执行其自己的迭代查询。<br/>-如果使用了 **/slave**参数，则 DNS 服务器不会执行其自己的迭代查询。 这意味着，DNS 服务器仅将未解析的查询转发到列表中的 DNS 服务器，并且，如果转发器没有解决这些查询，则不会尝试迭代查询。 将一个 IP 地址设置为 DNS 服务器的转发器会更有效。 你可以对网络中的内部服务器使用**resetforwarders**命令，将未解析的查询转发到一个具有外部连接的 DNS 服务器。<br/>-列出转发器的 IP 地址两次会导致 DNS 服务器尝试转发到该服务器两次。<br/># # # # 示例用法<br/><pre>dnscmd dnssvr1.contoso.com /resetforwarders 10.0.0.1 /timeout 7 /slave  
dnscmd dnssvr1.contoso.com /resetforwarders /noslave</pre><br/>### <a name=BKMK_17> </a>dnscmd/resetlistenaddresses<br/>指定服务器上侦听 DNS 客户端请求的 IP 地址。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /resetlistenaddresses [&lt;listenaddress&gt;]</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<listenaddress>**<br/>指定 DNS 服务器上侦听 DNS 客户端请求的 IP 地址。 如果未指定侦听地址，则服务器上的所有 IP 地址将侦听客户端请求。<br/># # # # 备注<br/>-默认情况下，DNS 服务器上的所有 IP 地址都侦听客户端 DNS 请求。<br/># # # # 示例用法<br/><code>dnscmd dnssvr1.contoso.com /resetlistenaddresses 10.0.0.1</code><br/>### <a name=BKMK_18> </a>dnscmd/startscavenging<br/>通知 DNS 服务器尝试立即搜索指定 DNS 服务器中的过时资源记录。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /startscavenging</code><br/># # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/># # # # 备注<br/>-成功完成此命令会立即启动清理。<br/>-尽管开始清除的命令似乎已成功完成，但除非满足以下前提条件，否则清理将不会启动：<br/>    -同时为服务器和区域启用清理。<br/>    -区域已启动。<br/>    -资源记录具有时间戳。<br/>-有关如何启用服务器清理的信息，请参阅<a href=#BKMK_3 data-raw-source=[config](#BKMK_3)>config</a>节中的服务器级语法下的**scavenginginterval**参数。<br/>-有关如何对区域启用清理的信息，请参阅<a href=#BKMK_3 data-raw-source=[config](#BKMK_3)>config</a>部分中区域级别语法下的**老化**参数。<br/>-有关如何启动已暂停的区域的信息，请参阅<a href=#BKMK_35 data-raw-source=[zoneresume](#BKMK_35)>zoneresume</a>部分。<br/>-有关如何检查时间戳的资源记录的信息，请参阅<a href=#BKMK_1 data-raw-source=[ageallrecords](#BKMK_1)>ageallrecords</a>部分。<br/>-如果清除失败，则不会显示任何警告消息。<br/># # # # 示例用法<br/><code>dnscmd dnssvr1.contoso.com /startscavenging</code><br/>### <a name=BKMK_19> </a>dnscmd/statistics<br/>显示或清除指定 DNS 服务器的数据。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /statistics [&lt;StatID&gt;] [/clear]</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<StatID>**<br/>指定要显示的统计信息或统计组合。 标识号用于标识统计信息。 如果未指定统计信息 ID 号，则显示所有统计信息。<br/>下面是可以指定的数字列表以及显示的相应统计信息：<br/>**00000001**<br/>time<br/>**00000002**<br/>query<br/>**00000004**<br/>query2<br/>**00000008**<br/>Recurse<br/>**00000010**<br/>主服务器<br/>**00000020**<br/>辅助<br/>**00000040**<br/>WINS<br/>**00000100**<br/>Update<br/>**00000200**<br/>SkwanSec<br/>**00000400**<br/>Ds<br/>**00010000**<br/>内存<br/>**00100000**<br/>PacketMem<br/>**00040000**<br/>Dbase<br/>**00080000**<br/>记录<br/>**00200000**<br/>NbstatMem<br/>**/clear**<br/>将指定的统计信息计数器重置为零。<br/># # # # 备注<br/>- **Statistics**命令显示启动或恢复 DNS 服务器时开始的计数器。<br/># # # # 示例<br/>请参阅 < href =https://technet.microsoft.com/library/cc784399(v=ws.10).aspx 数据原始源 =[示例7：显示 DNS 服务器的时间统计信息](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)> 示例7：显示 DNS 服务器的时间统计信息</a> 或 < href =https://technet.microsoft.com/library/cc784399(v=ws.10).aspx 数据原始-源 =[示例8：显示](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)> 示例8的 DNS 服务器的 NbstatMem 统计信息：显示 DNS 服务器</a> 的 NbstatMem 统计信息。<br/>### <a name=BKMK_20> </a>dnscmd/unenlistdirectorypartition<br/>从指定的目录分区&#39;的副本集删除 DNS 服务器。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /unenlistdirectorypartition &lt;PartitionFQDN&gt;</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<PartitionFQDN>**<br/>将删除的 DNS 应用程序目录分区的 FQDN。<br/>### <a name=BKMK_21> </a>dnscmd/writebackfiles<br/>检查 DNS 服务器内存的更改，并将其写入永久性存储。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /writebackfiles [&lt;ZoneName&gt;]</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<ZoneName>**<br/>指定要更新的区域的名称。<br/># # # # 备注<br/>- **Writebackfiles**命令会更新所有脏区域或指定的区域。 如果内存中有一些尚未写入持久性存储的更改，则区域很脏。 这是一个用于检查所有区域的服务器级操作。 可以在此操作中指定一个区域，也可以使用<a href=#BKMK_37 data-raw-source=[zonewriteback](#BKMK_37)>zonewriteback</a>操作。<br/># # # # 示例用法<br/><code>dnscmd dnssvr1.contoso.com /writebackfiles</code><br/>### <a name=BKMK_22> </a>dnscmd/zoneadd<br/>将区域添加到 DNS 服务器。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /zoneadd &lt;ZoneName&gt; &lt;Zonetype&gt; [/dp &lt;FQDN&gt;| {/domain|/enterprise|/legacy}]</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<ZoneName>**<br/>指定区域的名称。<br/>**<Zonetype>**<br/>指定要创建的区域的类型。 每个区域类型都具有不同的必需参数：<br/>**/dsprimary**<br/>创建 active directory 集成区域。<br/>**/primary/file <FileName>**<br/>创建标准的主要区域，并指定将存储区域信息的文件的名称。<br/>**/secondary <MasterIPaddress> [<MasterIPaddress>...]**<br/>创建标准辅助区域。<br/>**/stub <MasterIPaddress> [<MasterIPaddress>...]/file <FileName>**<br/>创建支持文件的存根区域。<br/>**/dsstub <MasterIPaddress> [<MasterIPaddress>...]**<br/>创建 active directory 集成存根区域。<br/>**/forwarder <MasterIPaddress> [<MasterIPaddress>] .../file <FileName>**<br/>指定创建的区域将未解析的查询转发到另一台 DNS 服务器。<br/>**/dsforwarder**<br/>指定创建的 active directory 集成区域将未解析的查询转发到另一台 DNS 服务器。<br/>**/dp <FQDN> {/domain |/enterprise |/legacy}**<br/>指定要在其上存储区域的目录分区。<br/>**<FQDN>**<br/>指定目录分区的 FQDN。<br/>**/domain**<br/>在域目录分区上存储区域。<br/>**/enterprise**<br/>在企业目录分区上存储区域。<br/>**/legacy**<br/>将区域存储在旧目录分区上。<br/># # # # 备注<br/>-指定 **/forwarder**或 **/dsforwarder**区域类型将创建执行条件性转发的区域。<br/># # # # 示例用法<br/><pre>dnscmd dnssvr1.contoso.com /zoneadd test.contoso.com /dsprimary  
dnscmd dnssvr1.contoso.com /zoneadd secondtest.contoso.com /secondary 10.0.0.2</pre><br/>### <a name=BKMK_23> </a>dnscmd/zonechangedirectorypartition<br/>更改指定区域所在的目录分区。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /zonechangedirectorypartition &lt;ZoneName&gt;] {[&lt;NewPartitionName&gt;] | [&lt;Zonetype&gt;] }</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<ZoneName>**<br/>区域所在的当前目录分区的 FQDN。<br/>**<NewPartitionName>**<br/>区域将移动到的目录分区的 FQDN。<br/>**<Zonetype>**<br/>指定区域将移动到的目录分区类型。<br/>**/domain**<br/>将区域移动到内置域目录分区。<br/>**/forest**<br/>将区域移到内置的林目录分区。<br/>**/legacy**<br/>将区域移动到为 active directory 域控制器创建的目录分区。 这些目录分区并不是纯模式所必需的。<br/>### <a name=BKMK_24> </a>dnscmd/zonedelete<br/>删除指定的区域。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /zonedelete &lt;ZoneName&gt; [/dsdel] [/f]</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<ZoneName>**<br/>指定要删除的区域的名称。<br/>**/dsdel**<br/>从 AD DS 中删除区域。<br/>**/f**<br/>运行命令而不要求确认。<br/># # # # 示例<br/>请参阅 < href =https://technet.microsoft.com/library/cc784399(v=ws.10).aspx 数据原始源 =[示例9：从 dns 服务器中删除区域](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)> 示例9：从 dns 服务器删除区域</a> 。<br/>### <a name=BKMK_25> </a>dnscmd/zoneexport<br/>创建一个文本文件，该文件列出指定区域的资源记录。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /zoneexport &lt;ZoneName&gt; &lt;ZoneExportFile&gt;</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由本地计算机语法、IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<ZoneName>**<br/>指定区域的名称。<br/>**<ZoneExportFile>**<br/>指定要创建的文件的名称。<br/># # # # 备注<br/>- **Zoneexport**操作为 active directory 集成区域创建了一个用于疑难解答的资源记录文件。 默认情况下，此命令创建的文件放置在 DNS 目录中，默认情况下为% systemroot%/System32/Dns 目录。<br/># # # # 示例<br/>请参阅 < href =https://technet.microsoft.com/library/cc784399(v=ws.10).aspx 数据原始-源 =[示例10：将区域资源记录列表导出到文件](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)> 示例10：将区域资源记录列表导出到文件</a> 。<br/>### <a name=BKMK_26> </a>dnscmd/zoneinfo<br/>显示指定区域的注册表部分的设置：**HKEY_LOCAL_MACHINE \SYSTEM\CurrentControlSet\Services\DNS\Parameters\Zones\<ZoneName >**<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /zoneinfo &lt;ZoneName&gt;  [&lt;Setting&gt;]</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<ZoneName>**<br/>指定区域的名称。<br/>**<Setting>**<br/>您可以单独指定**zoneinfo**命令返回的任何设置。 如果未指定设置，则返回所有设置。<br/># # # # 备注<br/>- **Zoneinfo**命令显示 DNS 区域级别**HKEY_LOCAL_MACHINE \system\currentcontrolset\services\dns\parameters\zones\<ZoneName >** 上的注册表设置。<br/>-若要显示服务器级注册表设置，请使用<a href=#BKMK_12 data-raw-source=[info](#BKMK_12)>info</a>命令。<br/>-若要查看可使用此命令显示的设置的列表，请参阅<a href=#BKMK_3 data-raw-source=[config](#BKMK_3)>config</a>命令。<br/># # # # 示例<br/>请参阅 < href =https://technet.microsoft.com/library/cc784399(v=ws.10).aspx 数据原始-源 =[示例11：显示 RefreshInterval 中的注册表](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)设置 > 示例11：显示注册表中的 RefreshInterval 设置</a> 或 < href =https://technet.microsoft.com/library/cc784399(v=ws.10).aspx 数据原始源 =[示例12：显示来自注册表](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)的老化设置 > 示例12：显示注册表</a> 的老化设置。<br/>### <a name=BKMK_27> </a>dnscmd/zonepause<br/>暂停指定的区域，后者将忽略查询请求。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /zonepause &lt;ZoneName&gt;</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<ZoneName>**<br/>指定要暂停的区域的名称。<br/># # # # 备注<br/>-若要恢复区域并使其在暂停后可供使用，请使用<a href=#BKMK_35 data-raw-source=[zoneresume](#BKMK_35)>zoneresume</a>命令。<br/># # # # 示例用法<br/><code>dnscmd dnssvr1.contoso.com /zonepause test.contoso.com</code><br/>### <a name=BKMK_28> </a>dnscmd/zoneprint<br/>列出区域中的记录。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /zoneprint &lt;ZoneName&gt;</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由本地计算机语法、IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<ZoneName>**<br/>标识要列出的区域。<br/>### <a name=BKMK_30> </a>dnscmd/zonerefresh<br/>强制从主区域更新辅助 DNS 区域。<br/># # # # 语法<br/><code>dnscmd &lt;ServerName&gt; /zonerefresh &lt;ZoneName&gt;</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<ZoneName>**<br/>指定要刷新的区域的名称。<br/># # # # 备注<br/>- **Zonerefresh**命令强制检查主服务器的授权机构起始（SOA）资源记录中的版本号。 如果主服务器上的版本号高于辅助服务器&#39;的版本号，则会启动区域传送来更新辅助服务器。 如果版本号相同，则不会进行区域传输。<br/>-默认情况下每15分钟执行一次强制检查。 若要更改默认设置，请使用**dnscmd config refreshinterval**命令。<br/># # # # 示例用法<br/><code>dnscmd dnssvr1.contoso.com /zonerefresh test.contoso.com</code><br/>### <a name=BKMK_31> </a>dnscmd/zonereload<br/>从源复制区域信息。<br/># # # # 语法<br/><code>dnscmd &lt;ServerName&gt; /zonereload &lt;ZoneName&gt;</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<ZoneName>**<br/>指定要重新加载的区域的名称。<br/># # # # 备注<br/>-如果区域是 active directory 集成的，则从 AD DS 重新加载它。<br/>-如果区域是一个标准的支持文件的区域，则会从文件重新加载。<br/># # # # 示例用法<br/><code>dnscmd dnssvr1.contoso.com /zonereload test.contoso.com</code><br/>### <a name=BKMK_32> </a>dnscmd/zoneresetmasters<br/>将提供区域传输信息的主服务器的 IP 地址重置为辅助区域。<br/># # # # 语法<br/><code>dnscmd &lt;ServerName&gt; /zoneresetmasters &lt;ZoneName&gt; [/local] [&lt;IPaddress&gt; [&lt;IPaddress&gt;]...]</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<ZoneName>**<br/>指定要重新加载的区域的名称。<br/>**/local**<br/>设置本地主列表。 此参数用于 active directory 集成区域。<br/>**<IPaddress>**<br/>辅助区域的主服务器的 IP 地址。<br/># # # # 备注<br/>-最初在创建辅助区域时设置此值。 在辅助服务器上使用**zoneresetmasters**命令。 如果在主 DNS 服务器上设置此值，则该值无效。<br/># # # # 示例用法<br/><pre>dnscmd dnssvr1.contoso.com /zoneresetmasters test.contoso.com 10.0.0.1  
dnscmd dnssvr1.contoso.com /zoneresetmasters test.contoso.com /local</pre><br/>### <a name=BKMK_33> </a>dnscmd/zoneresetscavengeservers<br/>更改可清理指定区域的服务器的 IP 地址。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /zoneresetscavengeservers &lt;ZoneName&gt; [&lt;IPaddress&gt; [&lt;IPaddress&gt;]...]</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由本地计算机语法、IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<ZoneName>**<br/>标识要清除的区域。<br/>**<IPaddress>**<br/>列出可执行清理的服务器的 IP 地址。 如果省略此参数，则承载此区域的所有服务器都可以清理它。<br/># # # # 备注<br/>-默认情况下，托管区域的所有服务器都可以清理该区域。<br/>-如果一个区域托管在多个 DNS 服务器上，则可以使用此命令减少区域清理的次数。<br/>-必须在受此命令影响的 DNS 服务器和区域上启用清理。<br/># # # # 示例用法<br/><code>dnscmd dnssvr1.contoso.com /zoneresetscavengeservers test.contoso.com 10.0.0.1 10.0.0.2</code><br/>### <a name=BKMK_34> </a>dnscmd/zoneresetsecondaries<br/>指定主服务器在请求区域传输时响应的辅助服务器的 IP 地址列表。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /zoneresetsecondaries &lt;ZoneName&gt; {/noxfr | /nonsecure | /securens | /securelist &lt;SecurityIPaddresses&gt;} {/nonotify | /notify | /notifylist &lt;NotifyIPaddresses&gt;}</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略参数，则使用本地服务器。<br/>**<ZoneName>**<br/>指定将重置其辅助服务器的区域的名称。<br/>**/noxfr |/nonsecure |/securens |/securelist <SecurityIPaddresses>**<br/>指定是所有还是仅部分请求更新的辅助服务器获取更新。<br/>**/noxfr**<br/>指定不允许区域传输。<br/>**/nonsecure**<br/>指定授予所有区域传送请求。<br/>**/securens**<br/>指定仅为区域的名称服务器（NS）资源记录中列出的服务器授予传输。<br/>**/securelist**<br/>指定仅向服务器列表授予区域传输。 此参数必须后跟主服务器使用的一个或多个 IP 地址。<br/>**<SecurityIPaddresses>**<br/>列出从主服务器接收区域传送的 IP 地址。 此参数仅与 **/securelist**参数一起使用。<br/>**/nonotify |/notify |/notifylist <NotifyIPaddresses>**<br/>指定仅向某些辅助服务器发送更改通知：<br/>**/nonotify**<br/>指定不将更改通知发送到辅助服务器。<br/>**/notify**<br/>指定将更改通知发送到所有辅助服务器。<br/>**/notifylist**<br/>指定仅将更改通知发送到服务器列表。 此命令后面必须跟有主服务器使用的一个或多个 IP 地址。<br/>**<NotifyIPaddresses>**<br/>指定将更改通知发送到的一个或多个辅助服务器的 IP 地址。 此列表仅与 **/notifylist**参数一起使用。<br/># # # # 备注<br/>-使用主服务器上的**zoneresetsecondaries**命令指定其如何响应辅助服务器的区域传输请求。<br/># # # # 示例用法<br/><pre>dnscmd dnssvr1.contoso.com /zoneresetsecondaries test.contoso.com /noxfr /nonotify  
dnscmd dnssvr1.contoso.com /zoneresetsecondaries test.contoso.com /securelist 11.0.0.2</pre><br/>### <a name=BKMK_29> </a>dnscmd/zoneresettype<br/>更改区域的类型。<br/># # # # 语法<br/><code>dnscmd [&lt;ServerName&gt;] /zoneresettype &lt;ZoneName&gt; &lt;Zonetype&gt; [/overwrite_mem | /overwrite_ds]</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由本地计算机语法、IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<ZoneName>**<br/>标识将更改类型的区域。<br/>**<Zonetype>**<br/>指定要创建的区域的类型。 每种类型具有不同的必需参数：<br/>**/dsprimary**<br/>创建 active directory 集成区域。<br/>**/primary/file <FileName>**<br/>创建标准主要区域。<br/>**/secondary <MasterIPaddress> [，<MasterIPaddress>...]**<br/>创建标准辅助区域。<br/>**/stub <MasterIPaddress>[，<MasterIPaddress>...]/file <FileName>**<br/>创建支持文件的存根区域。<br/>**/dsstub <MasterIPaddress>[，<MasterIPaddress>...]**<br/>创建 active directory 集成存根区域。<br/>**/forwarder &lt;D d [，<MasterIPaddress>] .../file<FileName>**<br/>指定创建的区域将未解析的查询转发到另一台 DNS 服务器。<br/>**/dsforwarder**<br/>指定创建的 active directory 集成区域将未解析的查询转发到另一台 DNS 服务器。<br/>**/overwrite_mem |/overwrite_ds**<br/>指定如何覆盖现有数据：<br/>**/overwrite_mem**<br/>从 AD DS 中的数据覆盖 DNS 数据。<br/>**/overwrite_ds**<br/>覆盖 AD DS 中的现有数据。<br/># # # # 备注<br/>-将 "区域类型" 设置为 " **/dsforwarder** " 将创建执行条件性转发的区域。<br/># # # # 示例用法<br/><pre>dnscmd dnssvr1.contoso.com /zoneresettype test.contoso.com /primary /file test.contoso.com.dns  
dnscmd dnssvr1.contoso.com /zoneresettype second.contoso.com /secondary 10.0.0.2</pre><br/>### <a name=BKMK_35> </a>dnscmd/zoneresume<br/>启动先前暂停的指定区域。<br/># # # # 语法<br/><code>dnscmd &lt;ServerName&gt; /zoneresume &lt;ZoneName&gt;</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<ZoneName>**<br/>指定要恢复的区域的名称。<br/># # # # 备注<br/>-可以使用此操作撤消<a href=#BKMK_27 data-raw-source=[zonepause](#BKMK_27)>zonepause</a>操作。<br/># # # # 示例用法<br/><code>dnscmd dnssvr1.contoso.com /zoneresume test.contoso.com</code><br/>### <a name=BKMK_36> </a>dnscmd/zoneupdatefromds<br/>从 AD DS 更新指定的 active directory 集成区域。<br/># # # # 语法<br/><code>dnscmd &lt;ServerName&gt; /zoneupdatefromds &lt;ZoneName&gt;</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<ZoneName>**<br/>指定要更新的区域的名称。<br/># # # # 备注<br/>-active directory 集成的区域默认每五分钟执行一次此更新。 若要更改此参数，请使用**dnscmd config dspollinginterval**命令。<br/># # # # 示例用法<br/><code>dnscmd dnssvr1.contoso.com /zoneupdatefromds</code><br/>### <a name=BKMK_37> </a>dnscmd/zonewriteback<br/>在 DNS 服务器内存中检查与指定区域相关的更改，并将其写入持久性存储。<br/># # # # 语法<br/><code>dnscmd &lt;ServerName&gt; /zonewriteback &lt;ZoneName&gt;</code><br/># # # # # 参数<br/>**<ServerName>**<br/>指定要管理的 DNS 服务器，由 IP 地址、FQDN 或主机名表示。 如果省略此参数，则使用本地服务器。<br/>**<ZoneName>**<br/>指定要更新的区域的名称。<br/># # # # 备注<br/>-这是一个区域级别的操作。 你可以使用<a href=#BKMK_21 data-raw-source=[writebackfiles](#BKMK_21)>writebackfiles</a>操作更新 DNS 服务器上的所有区域。<br/># # # # 示例用法<br/><code>dnscmd dnssvr1.contoso.com /zonewriteback test.contoso.com</code>  
